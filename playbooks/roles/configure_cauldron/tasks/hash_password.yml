---

# @action hash_password.yml # Generate hashes for each item in `<loop_psw>` and get result.
# @var passwords_container: tmp_container_passwords # Name of the temporary passwords container.
# @var es_image: amazon/opendistro-for-elasticsearch:0.9.0 # Name of the ES Docker image.
# @var loop_psw # List of the Open Distro essentials passwords.
- name: Generate passwords for {{item.loop_output}} and get result
  docker_container:
    name: "{{passwords_container}}"
    image: "{{es_image}}"
    cleanup : yes
    detach: no
    entrypoint: "/bin/bash"
    command: "/usr/share/elasticsearch/plugins/opendistro_security/tools/hash.sh -p {{item.loop_psw}}"
  register: output

# @action hash_password.yml # Set variable `<loop_output>` to be equal to the output of the previous task.
# @var loop_output # List of the output hashes.
- set_fact:
    "{{ item.loop_output }}": "{{ output.ansible_facts.docker_container.Output }}"
